@page
@model CategoryPage

@{
	Layout = "_Layout";
}

<div class="col-12">
	<div class="row justify-content-between align-items-xl-center">
		<div class="col-12 col-xl-6">
			<div class="img-center__wrapper">
				<img class="img-responsive img-center" src="@Model.categoryCard?.CategoryImg">
			</div>
		</div>
		<div class="col-md-5 col-xs-12 active">
			<h1 class="h1__caption mb-per-5">@Model.categoryCard?.CategoryName</h1>
			<p class="p__caption mb-per-5">@Model.categoryCard?.Description</p>
		</div>
	</div>
</div>

@foreach (Product pr in @Model!.DisplayedProducts)
{
	<div class="col-3">
	<div class="" id="">
		<div id="img-container">
			<div class="title-wrp">@pr.Name</div>
			<div class="post-and-image">
				<img class="col-12" src="@pr.MainPhoto">
				<div class="description-wrp">@pr.Description</div>
			</div>
		</div>
		<div class="footer-row">
			<div class="tags-wrp">@pr.Tags</div>
			<div class="tags-wrp">@pr.Price.ToString("C")</div>
			@if (@pr.Discount != null && @pr.OldPrice != null)
				{
					<div class="tags-wrp">-@pr.Discount%</div>
					<div class="tags-wrp"><s>@pr.OldPrice?.ToString("C")</s></div>
				}
			</div>
		</div>
		<a asp-page="CardProduct" asp-route-CategoryName="@pr.Category!.CategoryName" asp-route-ProductID="@pr.ProductID"
		asp-route-Name="@pr.Name">Подробнее</a>

		<form id="ProductID=@pr.ProductID" class="addToCart" asp-page="/Cart" method="post">
			<input type="hidden" name="ProductID" asp-for="@pr.ProductID" />
			<input type="hidden" name="returnUrl" value="@ViewContext.HttpContext.Request.PathAndQuery()" />
			<button type="submit" class="btn btn-success btn-sm pull-right" style="float:right">
				Добавить в корзину
			</button>
		</form>
	</div>
}